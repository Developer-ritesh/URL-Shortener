# URL Shortener v2.0

A simple URL shortener service built with Node.js, Express, and MongoDB. This service allows you to generate short URLs that redirect to original long URLs, provides analytics on URL usage, and includes a user-friendly web interface for managing URLs.

## Features

- Generate short URLs for any valid URL
- Redirect to the original URL when accessing the short URL
- Track and view analytics including total clicks and visit timestamps
- **Web UI Home Page** for easy URL management:
  - Create new short URLs via a form
  - View a list of all created URLs with details
  - Open short URLs in a new tab
  - Copy short URLs to clipboard with a button
  - Delete URLs with confirmation
- Responsive UI styled with Bootstrap 5

## Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd url_shortener
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Make sure you have MongoDB installed and running. The app connects to MongoDB at:
   ```
   mongodb://localhost:27017/urlshortener
   ```

4. Start the server:
   ```bash
   node index.js
   ```

The server will start on port 8000.

## Usage

### Web UI Home Page

Open your browser and navigate to:

```
http://localhost:8000/
```

You will see the URL Shortener home page where you can:

- Enter an original URL in the form and click "Generate" to create a short URL.
- View all your created URLs in a table with columns for Short ID, Redirect URL, Clicks, and Actions.
- Use the "Open" button to open the short URL in a new tab.
- Use the "Copy" button to copy the short URL to your clipboard.
- Use the "Delete" button to remove a short URL (with confirmation prompt).

### API Endpoints

Use the following API endpoints to interact with the URL shortener service programmatically:

#### Generate a new short URL

- **Endpoint:** `POST /url`
- **Request Body:**
  ```json
  {
    "url": "https://example.com"
  }
  ```
- **Response:**
  ```json
  {
    "id": "shortId"
  }
  ```
- The `id` is the generated short URL identifier.

#### Redirect to original URL

- **Endpoint:** `GET /url/:shortId`
- Redirects the user to the original URL associated with the given `shortId`.

#### Get URL analytics

- **Endpoint:** `GET /url/analytics/:shortId`
- **Response:**
  ```json
  {
    "totalClicks": 10,
    "analytics": [
      { "timestamp": 1633024800000 },
      { "timestamp": 1633111200000 }
    ]
  }
  ```
- Returns the total number of clicks and a list of visit timestamps for the short URL.

#### Delete a short URL

- **Endpoint:** `POST /url/delete-url`
- **Request Body:**
  ```json
  {
    "shortId": "shortId"
  }
  ```
- Deletes the specified short URL.

## Notes

- The service uses an 8-character unique ID generated by the `nanoid` package.
- Visit history is stored in MongoDB and updated on each redirect.
- The web UI uses Bootstrap 5 for styling and includes clipboard copy functionality.
- Ensure MongoDB is running locally or update the connection string in `index.js` accordingly.

## License

This project is open source and available under the MIT License.
